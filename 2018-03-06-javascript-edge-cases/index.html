<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-26153d56726fbb607fed.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-21fb3885ffa601f4f2bd.js" as="script"/><link rel="preload" href="/path---2018-03-06-javascript-edge-cases-ac441385f418a93a15fe.js" as="script"/><link rel="preload" href="/app-5727c19d48645603d222.js" as="script"/><link rel="preload" href="/commons-bc341fb14aaf4cb10a84.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">JavaScript. Edge Cases | yerevancoder</title><style data-react-helmet="true">
body {
  background-color: #FAF5F1;
}

.JobPostingCard > * {
  margin:0;
}

.JobPostingCard {
  box-shadow: 3px 3px 5px 6px #ccc;
  border-radius: 5px;
  margin-bottom:20px;
  padding:5px;
}

.InformationBar {
  display:flex;
  flex-direction:column;
}
.InformationBar > * {
  font-family: Montserrat, sans-serif;
  margin:0;
  color:#37425D;
  font-weight:600;
}
.Headroom__Container {
  padding-left: 1%;
  padding-right: 1%;
  padding-top: 1%;
  transition: all .1s ease-in-out;
}

.Headroom__Container--ShowingHeader {
  background-color: hsla(247.5, 50%, 3.1%, 0.9);
  display: flex;
  color: white;
  flex-direction: column;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 1rem;
}

.ApplicationContainer__Container {
  display:flex;
  padding:0;
}

.ApplicationContainer__MainContent {
  display:flex;
  background-color:#FAF5F1;
  flex-direction:column;
}

.Profile__Container > * {
  margin:0;
  font-family: Montserrat, sans-serif;
}

.Profile__Container {
  padding:15px;
}

.Profile__User {
  background-color:hsl(220, 12%, 95%);
  padding:10px;
  display:flex;
}

.Profile__PostingsTable {
  height:400px;
  padding-top:10px;
  display:flex;
  flex-direction:column;
  background-color: hsl(220, 12%, 95%);
  overflow-y: scroll;
}

.Profile__PostingRecord {
  height: 150px;
  display: flex;
  align-items: center;
  justify-content:center;
  border-bottom-width:10px;
}

legend {
  margin-bottom:0;
  font-family: Montserrat, sans-serif;
  padding-left:5px;
  padding-right:5px;
  font-style:italic;
  font-weight:700;
}

.loginActionRow__GetHiredText {
  margin-bottom:0;
  font-family: Montserrat, sans-serif;
}

input[type=button], input[type=submit] {
  border: 0;
  border-radius: 5px;
  padding: 3px 15px;
  box-shadow: inset 0 2px 4px 0 hsla(0, 0%, 1%, 0.20);
  background-color: hsl(220, 12%, 95%);
}

input[type=text], input[type=password], input[type=email], textarea {
  width: 90%;
  margin-left: 5%;
  margin-right: 5%;
  border: 0;
  margin-bottom: 10px;
  border-radius: 5px;
  padding: 10px;
  font-weight: 400;
  box-shadow: inset 0 2px 4px 0 hsla(0, 0%, 1%, 0.20);
}

.NewJobPosting__SubmitButton {
  width: 90%;
  margin-left: 5%;
  margin-right: 5%;
  font-family: Montserrat, sans-serif;
}

.Profile__CreationTime:nth-child(2) {
  text-align:right;
}

.ReactModal__Content {
  opacity: 0;
}

.ReactModal__Content--after-open {
  opacity: 1;
  transition: opacity 450ms;
}

.ReactModal__Content--before-close {
  opacity: 0;
}
@supports (zoom:2) {
	input[type="radio"],  input[type=checkbox]{
	  zoom: 1.3;
	}
}

@supports not (zoom:2) {
	input[type="radio"],  input[type=checkbox]{
		transform: scale(1.3);
	}
}

.loginActionRow__Container, .loginActionRow__AuthingButtons {
  display:flex;
}

@media (min-width: 650px) and (orientation: landscape) {
  .NewsPageContainer {
    background-color:red;
    height:100vh;
  }
  .NewsPageContainer__FixedSubmitFooter {
    background-color:blue;
    position: fixed;
    bottom:0;
    width:calc(100% - 250px - 60px);
  }
  .InformationBar__SiteBannerName {
    font-size:30px;
  }
  .InformationBar > * {
    text-shadow: 2px 2px 3px gold;
  }
  .InformationBar {
    position: fixed;
    justify-content:space-around;
    z-index:99;
    left:0;
    bottom:0;
    top:0;
    background: linear-gradient(
      to bottom,
      #C5C9CF,
      #C5C9CF 50%,
      #FAF5F1 50%,
      #FAF5F1
    );
    background-size: 100% 20px;
    width:250px;
    padding:10px;
  }

  .ApplicationContainer__MainContent {
    padding-left:250px;
    width:100%;
  }

  .ApplicationContainer__BusinessContent {
    padding-left:30px;
    padding-right:30px;
  }

  .Profile__User > * {

  }
  .Profile__User {
    justify-content:space-between;
  }
  legend {
    font-size:32px;
  }

  .ReactModal__Content--after-open.SigninForm__Container {
    width:375px;
  }

  .ReactModal__Content--after-open.Profile__Container {
    width:600px;
  }

  .loginActionRow__GetHiredText {
    font-size:24px;
  }
  .loginActionRow__Container, .loginActionRow__AuthingButtons {
    flex-direction:row;
    justify-content:space-between;
    align-items:center;
  }
}

@media (max-width: 649px) {
  .InformationBar {
    border-bottom-width:1px;
    border-bottom-style:inset;
    border-bottom-color: black;
    background-color: #FAF5F1;
    justify-content:space-between;
    margin:0;
  }
  .InformationBar > *:not(h3) {
    font-size:10px;
    padding-bottom:10px;
  }
  .InformationBar__SiteBannerName {
    font-weight:700;
    padding-bottom:10px;
  }
  .ApplicationContainer__MainContent {

  }

  .Headroom__Container--ShowingHeader > * {
    font-size:3px;
  }

  .ApplicationContainer__Container {
    flex-direction:column;
  }

  .Profile__User > div {
    flex-direction:column;
    align-items:center;
  }
  legend {
    font-size:20px;
  }
  .ReactModal__Content--after-open {
    width:90%;
  }
  .loginActionRow__GetHiredText {
    font-size:39px;
  }
  .loginActionRow__Container, .loginActionRow__AuthingButtons {
    flex-direction:column;
    text-align:center;
  }
  input[type=button] {
    margin-top:10px;
  }
}
</style><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style></head><body><div id="___gatsby"><div class="ApplicationContainer__Container" data-reactroot="" data-reactid="1" data-react-checksum="-523537656"><!-- react-empty: 2 --><aside class="InformationBar" data-reactid="3"><h3 class="InformationBar__SiteBannerName" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="5">yerevancoder</a></h3><p data-reactid="6">yerevancoder.com is a place for coders in Armenia to share their thoughts, experiences in programming and tech.</p><p data-reactid="7"><!-- react-text: 8 -->9<!-- /react-text --><!-- react-text: 9 --> coders have already contributed and we are always looking for more contributors, use this <!-- /react-text --><a href="/2018-03-13-how-yerevan-coder-works/" data-reactid="10">post</a><!-- react-text: 11 --> as a guide on how to add a new blog post and check out this<!-- /react-text --><!-- react-text: 12 --> <!-- /react-text --><a href="/2017-12-21-javascript-resources/" data-reactid="13">post</a><!-- react-text: 14 --> for many inpage lecture notes on learning JavaScript.<!-- /react-text --></p><p data-reactid="15"><!-- react-text: 16 -->Post a tech job on our <!-- /react-text --><a href="/hiring-board" data-reactid="17">hiring board</a><!-- react-text: 18 --> and consider checking out the source code<!-- /react-text --><!-- react-text: 19 --> <!-- /react-text --><a href="https://github.com/yerevancoder/yerevancoder.github.io" data-reactid="20">here</a><!-- react-text: 21 -->.<!-- /react-text --></p></aside><div class="ApplicationContainer__MainContent" data-reactid="22"><div class="ApplicationContainer__BusinessContent" data-reactid="23"><div data-reactid="24"><!-- react-empty: 25 --><h1 data-reactid="26">JavaScript. Edge Cases</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="27"><!-- react-text: 28 -->March 06, 2018<!-- /react-text --><!-- react-text: 29 --> | By <!-- /react-text --><!-- react-text: 30 -->Elina Hovakimyan<!-- /react-text --><!-- react-text: 31 --> | <!-- /react-text --><!-- react-text: 32 -->javascript, development<!-- /react-text --></p><div data-reactid="33"><h1>Edge cases in JavaScript</h1>
<p>Hi everyone, today we are going to talk about the edge cases in JS</p>
<h2>Small Decimal Values</h2>
<p>The most (in)famous side effect of using binary floating-point
numbers (which, remember, is true of all languages that use IEEE
754 — not just JavaScript as many assume/pretend) is:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.3</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p>Simply put, the representations for 0.1 and 0.2 in binary
floating-point are not exact, so when they are added, the result
is not exactly 0.3. It’s really close: 0.30000000000000004, but if
your comparison fails, “close” is irrelevant.</p>
<p>FYI, <code class="language-text">0.1 + 0.5 === 0.6</code> works perfectly fine.</p>
<p>So you just have to be careful while working with floating numbers.</p>
<p>One way of handling this issue in JS is to use a tiny “rounding
error”: <code class="language-text">Number.EPSILON</code>. Here is its polyfill:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>EPSILON<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Number<span class="token punctuation">.</span>EPSILON <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>You simply have to create a function which does the “close to
equal” comparison with <code class="language-text">Number.EPSILON</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>n1 <span class="token operator">-</span> n2<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span>EPSILON<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>

<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span><span class="token number">0.0000001</span><span class="token punctuation">,</span> <span class="token number">0.0000002</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<h2>NaN</h2>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p><code class="language-text">NaN</code> is a very special value in that it’s never equal to another
<code class="language-text">NaN</code> value (i.e., it’s never equal to itself). It’s the only
value, in fact, that is not reflexive (without the Identity
characteristic <code class="language-text">x === x</code>). So, <code class="language-text">NaN !== NaN</code>.</p>
<p>So how do we test for it, if we can’t compare to <code class="language-text">NaN</code> (since that
comparison would always fail)?</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

<span class="token function">isNaN</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>Easy enough, right? We use the built-in global utility called
<code class="language-text">isNaN(..)</code> and it tells us if the value is <code class="language-text">NaN</code> or not. Problem solved!</p>
<p>Not so fast.</p>
<p>The isNaN(..) utility has a fatal flaw. It appears it tried to take the meaning of NaN (“Not a Number”) too literally — that its job is basically: “test if the thing passed in is either not a number or is a number.” But that’s not quite accurate.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// NaN</span>
b<span class="token punctuation">;</span> <span class="token comment">// "foo"</span>

window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true -- ouch!</span>
</code></pre>
      </div>
<p>Clearly, “foo” is literally not a number, but it’s definitely not
the NaN value either! This bug has been in JS since the very
beginning (over 19 years of ouch).</p>
<p>As of ES6, finally a replacement utility has been provided:
<code class="language-text">Number.isNaN(..)</code>. A simple polyfill for it so that you can
safely check NaN values now even in pre-ES6 browsers is:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isNaN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Number<span class="token punctuation">.</span><span class="token function-variable function">isNaN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false -- phew!</span>
</code></pre>
      </div>
<h1>Infinity</h1>
<p>Developers from traditional compiled languages like C are probably
used to seeing either a compiler error or runtime exception, like
“Divide by zero,” for an operation like:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>However, in JS, this operation is well-defined and results in the
value Infinity (aka Number.POSITIVE_INFINITY). Unsurprisingly:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>
</code></pre>
      </div>
<p>As you can see, -Infinity (aka Number.NEGATIVE_INFINITY) results
from a divide-by-zero where either (but not both!) of the divide
operands is negative.</p>
<p>JS uses finite numeric representations (IEEE 754 floating-point,
which we covered earlier), so contrary to pure mathematics, it
seems it is possible to overflow even with an operation like
addition or subtraction, in which case you’d get Infinity or
-Infinity.</p>
<p>For example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> Number<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span> <span class="token comment">// 1.7976931348623157e+308</span>
a <span class="token operator">+</span> a<span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">970</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">969</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.7976931348623157e+308</span>
</code></pre>
      </div>
<p>According to the specification, if an operation like addition
results in a value that’s too big to represent, the IEEE 754
“round-to-nearest” mode specifies what the result should be. So,
in a crude sense, <code class="language-text">Number.MAX_VALUE + Math.pow( 2, 969 )</code> is
closer to <code class="language-text">Number.MAX_VALUE</code> than to <code class="language-text">Infinity</code>, so it “rounds
down,” whereas <code class="language-text">Number.MAX_VALUE + Math.pow( 2, 970 )</code> is closer
to <code class="language-text">Infinity</code> so it “rounds up”.</p>
<p>If you think too much about that, it’s going to make your head
hurt. So don’t. Seriously, stop!</p>
<p>Once you overflow to either one of the infinities, however,
there’s no going back. In other words, in an almost poetic sense,
you can go from finite to infinite but not from infinite back to
finite.</p>
<p>It’s almost philosophical to ask: “What is <code class="language-text">Infinity</code> divided by
<code class="language-text">Infinity</code>”. Our naive brains would likely say <code class="language-text">1</code> or maybe
<code class="language-text">Infinity</code>. Turns out neither is true. Both mathematically and in
JavaScript, <code class="language-text">Infinity / Infinity</code> is not a defined operation.
In JS, this results in <code class="language-text">NaN</code>.</p>
<h2>Negative zero</h2>
<p>It may confuse you as students of Computer Science major, but
Javascript has both negative and positive zeros!</p>
<p>Besides being specified literally as -0, negative zero also
results from certain mathematic operations. For example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
</code></pre>
      </div>
<p>However, there is a strange behavior when you want to convert
<code class="language-text">-0</code> to string:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// (some browser) consoles at least get it right</span>
a<span class="token punctuation">;</span> <span class="token comment">// -0</span>

<span class="token comment">// but the spec insists on lying to you!</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "0"</span>
a <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// "0"</span>
<span class="token function">String</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "0"</span>

<span class="token comment">// strangely, even JSON gets in on the deception</span>
JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "0"</span>
</code></pre>
      </div>
<p>and surprisingly, the reverse operation from <code class="language-text">string</code> to
<code class="language-text">number</code> results in a correct way:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token operator">+</span><span class="token string">'-0'</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'-0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'-0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
</code></pre>
      </div>
<p>In addition to stringification of negative zero being deceptive to
hide its true value, the comparison operators are also
(intentionally) configured to lie.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

a <span class="token operator">==</span> b<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

a <span class="token operator">===</span> b<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token number">0</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
a <span class="token operator">></span> b<span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p>In nowadays browsers you can get the right output of
<code class="language-text">console.log</code> tho:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
</code></pre>
      </div>
<p>However, older browsers may still return 0 (As a good programmer,
you have to use an up-to-date software, right?)</p>
<p>Clearly, if you want to distinguish between <code class="language-text">0</code> and <code class="language-text">-0</code>, you
can’t just rely on what the developer console outputs. So let’s be
a little bit more clever:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">isNegZero</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  n <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> n <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1</span> <span class="token operator">/</span> n <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">isNegZero</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p>Great! But why do we need <code class="language-text">-0</code>?</p>
<p>There are some kind of applications that use that sign to find out
the direction of movement before it came to 0. Preserving the sign
of 0 prevents potentially unwanted information loss.</p>
<h3><code class="language-text">Object.is(..)</code></h3>
<p>As of ES6, there’s a new utility that can be used to test two
values for absolute equality, without any of these exceptions.
It’s called <code class="language-text">Object.is(..)</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">0</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p>Let’s try to reimplement <code class="language-text">Object.is(..)</code> for pre-ES6
environments:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>is<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function-variable function">is</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// test for `-0`</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v2 <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> v1 <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> v2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// test for `NaN`</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">!==</span> v1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> v2 <span class="token operator">!==</span> v2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// everything else</span>
    <span class="token keyword">return</span> v1 <span class="token operator">===</span> v2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p><code class="language-text">Object.is(..)</code> probably shouldn’t be used in cases where ==
or === are known to be safe (see Chapter 4 “Coercion”), as the
operators are likely much more efficient and certainly are more
idiomatic/common. <code class="language-text">Object.is(..)</code> is mostly for these special
cases of equality.</p>
<h2>Value vs. Reference</h2>
<p>Let’s start from the example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// `b` is always a copy of the value in `a`</span>
b<span class="token operator">++</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 2</span>
b<span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment">// `d` is a reference to the shared `[1,2,3]` value</span>
d<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
d<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
</code></pre>
      </div>
<p>Simple values (aka scalar primitives) are always assigned/passed
by value-copy: null, undefined, string, number, boolean, and ES6’s
symbol.</p>
<p>Compound values — objects (including arrays, and all boxed object
wrappers — see Chapter 3) and functions — always create a copy
of the reference on assignment or passing.</p>
<p>Since references point to the values themselves and not to the
variables, you cannot use one reference to change where another
reference is pointed:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>

<span class="token comment">// later</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [4,5,6]</span>
</code></pre>
      </div>
<h2><code class="language-text">this</code></h2>
<p>Consider this code snippet:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo: '</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// keep track of how many times `foo` is called</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 -- WTF?</span>
</code></pre>
      </div>
<p>Congratulations, we’ve just created a global variable <code class="language-text">count</code>
with value <code class="language-text">NaN</code>! <code class="language-text">this</code> in <code class="language-text">this.count++</code> points to
global object! :O</p>
<p>This is another way of creating and accesing global variables
(never do this):</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre>
      </div>
<p>To solve this issue, we have to call foo function with binding to
function foo (which is apparently an object):</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo: '</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// keep track of how many times `foo` is called</span>
  <span class="token comment">// Note: `this` IS actually `foo` now, based on</span>
  <span class="token comment">// how `foo` is called (see below)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// using `call(..)`, we ensure the `this`</span>
    <span class="token comment">// points at the function object (`foo`) itself</span>
    foo<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre>
      </div>
<p>Let’s see what happens when you share reference of a function to
another variable and then call it:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span> <span class="token comment">// function reference/alias!</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'oops, global'</span><span class="token punctuation">;</span> <span class="token comment">// `a` also property on global object</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "oops, global"</span>
</code></pre>
      </div>
<p>Right! So what does this mean? <code class="language-text">bar === obj.foo</code>. These
variables are sharing the same reference to the same shared value.</p>
<p>Another example to show this problem from another side:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doFoo</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// `fn` is just another reference to `foo`</span>

  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- call-site!</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  foo<span class="token punctuation">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'oops, global'</span><span class="token punctuation">;</span> <span class="token comment">// `a` also property on global object</span>

<span class="token function">doFoo</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "oops, global"</span>
</code></pre>
      </div>
<h2>Automatic Semicolon Insertion</h2>
<p>One of the features that JavaScript offers is that semicolons are optional for programmers. However, you should be attentive with this! Sometimes missing the semicolons can result in errors or undesired results.</p>
<h3>Function return statements</h3>
<p>Let’s take a look at the function below. What will it return?</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span>
  <span class="token punctuation">(</span><span class="token string">'How are you?'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
</code></pre>
      </div>
<p>Oops! It returns <code class="language-text">undefined</code> instead of asking how are you. But why? Well, the reason is that it
added a semicolon after <code class="language-text">return</code> which means you didn’t mention what to return; thus, it’s
undefined.</p>
<p>What if you want to return several things and it’s not so comfortable to write it after the
<code class="language-text">return</code>. You just need to add parentheses (see below).</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token string">"How are you?"</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//How are you?</span>
</code></pre>
      </div>
<h3>Starting a line with parentheses || angle brackets</h3>
<p>Another tricky edge case in JavaScript is when you skip putting a semicolon and start the next line
with parentheses. Look at this code.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> trickyVariable <span class="token operator">=</span> <span class="token string">'I am a String'</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Be Happy If You See Me'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Uncaught TypeError: "I am a String" is not a function</span>
</code></pre>
      </div>
<p>To fix this error you should add a semicolon after defining a variable.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> trickyVariable <span class="token operator">=</span> <span class="token string">'I am a String'</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Be Happy If You See Me'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Be Happy If You See Me</span>
</code></pre>
      </div>
<p>The same happens with <code class="language-text">angle brackets [ ]</code>. Be careful in such cases!</p>
<h2>Other</h2>
<p>This isn’t even an edge case, but a lot of people make a mistake
right here:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token number">5</span> <span class="token operator">+</span> <span class="token string">'-5'</span> <span class="token operator">===</span> <span class="token string">'5-5'</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>number <code class="language-text">5</code> is simply coerced (type casted, type converted) to
a string <code class="language-text">&quot;5&quot;</code> and the concatenated to <code class="language-text">&quot;-5&quot;</code></p>
<p>The same case with <code class="language-text">-</code> sign! As we know, there is no such
operation for string using <code class="language-text">-</code>. This JS will coerce <code class="language-text">&quot;-5&quot;</code> to
<code class="language-text">-5</code> and then do a mathmatical operation <code class="language-text">-</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token number">5</span> <span class="token operator">-</span> <span class="token string">'-5'</span> <span class="token operator">===</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>A lot of beginner JS developers have a trouble with
understanding references in JS. As one of the biggerst issues
is this one:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p><code class="language-text">===</code> sign compares two reference-values. And of course
references to 2 different arrays are different, thus the
compareson fails.</p>
<p>A very popular question for a JS developer! Take a minute and
try to understand why would this happen!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 0</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// [object Object]</span>
</code></pre>
      </div>
<p>Ok, I hope you tried it! So here is the thing.</p>
<p>Let’s start with the first line</p>
<p>When we do <code class="language-text">{} + []</code>, JS first reads <code class="language-text">{}</code> as a block scope,
run it and then immediately exits it because there is no
operation to do (It doesn’t recognize <code class="language-text">{}</code> as object in this
case!). And then we are left with <code class="language-text">+ []</code> which means “change
the type of <code class="language-text">[]</code> to a number” (Remember how we change a string
to a number with the same operation <code class="language-text">+&quot;5&quot; === 5</code>).
So JS simply coerces <code class="language-text">[]</code> to <code class="language-text">0</code></p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// true!</span>
</code></pre>
      </div>
<p>The second line!</p>
<p>In this case JS understands <code class="language-text">+</code> as a concatenation sign
because on both sides of the operation we can see objects
(Array and object)! So <code class="language-text">+</code> just coerces <code class="language-text">[]</code> to <code class="language-text">&#39;&#39;</code> and <code class="language-text">{}</code>
to <code class="language-text">[object Object]</code>. After that it concatenates
<code class="language-text">&#39;&#39; + [object Object]</code> which of course results in
<code class="language-text">[object Object]</code>!</p>
<p>This is the case we’ve talked about on our slack channel!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token operator">==</span> x<span class="token punctuation">;</span> <span class="token comment">// true</span>
x <span class="token operator">==</span> <span class="token operator">!</span>x<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>As we all know the <code class="language-text">==</code> operator doesn’t preserve types of the
values on both sides. So it coerces those until it gets the same
type!</p>
<p>So let me describe you this case. On the second line where we have
<code class="language-text">x == x</code>, we have an object (array) on both sides. We just check
if the reference of these objects are the same or not (of course
those are the same because it’s the same variable). What’s about
the 3rd line? On the left side we still have a reference to an
array, but on the right side we have (what?) a boolean value!!!
Why does that happen? EZ, <code class="language-text">!</code> operator changes the type of any
value to boolean! So <code class="language-text">==</code> operator will do coercion of both sides
to get the same type. Both are coerced to <code class="language-text">number</code>. So <code class="language-text">[] -&gt; 0</code>
and <code class="language-text">false -&gt; 0</code>. That’s it!</p>
<p>Let’s now consider this funny case! Have you thought about
overwriting <code class="language-text">undefined</code>? Sounds crazy, right? JS doesn’t think so!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code class="language-js"><span class="token keyword">var</span> undefined <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// really bad idea!</span>
</code></pre>
      </div>
<p>NEVER DO THIS.</p>
<!--
So to prevent this from happening use `'use strict'` (We will talk about it in the next lecture but for now just use it :D )!

```js
"use strict";
var undefined = 2; // TypeError!
``` -->
<!-- ```js
// just in case you don't want to add
// 'use strict' to the whole environment
foo();
function foo() {
	"use strict";
	undefined = 2; // TypeError!
}
``` -->
<p>Thanks for reading! Hope you liked it! :D</p>
<h3>Reference</h3>
<p>“You don’t know JS”: <a href="https://github.com/getify/You-Dont-Know-JS">https://github.com/getify/You-Dont-Know-JS</a>
“Mauro Bringolf”: <a href="https://maurobringolf.ch/2017/06/automatic-semicolon-insertion-edge-cases-in-javascript/">https://maurobringolf.ch/2017/06/automatic-semicolon-insertion-edge-cases-in-javascript/</a></p></div><hr style="margin-bottom:1.75rem;" data-reactid="34"/><iframe height="400px" width="100%" src="https://repl.it/@fxfactorial/WarlikeIntrepidGraphics?lite=true" scrolling="no" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals" data-reactid="35"></iframe><div class="talkyard-comments" data-discussion-id="2018-02-08-javascript-edge-cases" data-talkyard-page-id="" data-reactid="36"><noscript data-reactid="37">Please enable Javascript to view comments.</noscript><p style="margin-top:25px;opacity:0.9;font-size:96%;" data-reactid="38"><!-- react-text: 39 -->Comments powered by <!-- /react-text --><a href="https://www.talkyard.io" data-reactid="40">Talkyard</a><!-- react-text: 41 -->.<!-- /react-text --></p></div><p data-reactid="42">hi</p></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-5727c19d48645603d222.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-21fb3885ffa601f4f2bd.js","162898551421021":"component---src-pages-404-js-78eb0160ebc5e112276c.js","274579804416951":"component---src-pages-hiring-board-js-11511207bae7e77929e2.js","35783957827783":"component---src-pages-index-js-a3d1396b89cc700dcde6.js","55274488676338":"component---src-pages-new-job-posting-js-ee6c88b5effc381eda51.js","60335399758886":"path----5a140873831f7691b22e.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","191505078443957":"path---2017-12-20-init-post-710ad2cbbfe660cf5db4.js","197253065398855":"path---2017-12-23-tech-places-and-events-afb21400c6e081be65a8.js","65041365863691":"path---2017-12-21-javascript-resources-7b55ad7f3267bc50f3fc.js","55470570494735":"path---2017-12-24-squash-commits-with-git-e3d6096552918a5054ff.js","115028173322024":"path---2017-12-31-elm-intro-d1f82d5ff13a3304f8ed.js","36374900432849":"path---2018-01-09-pay-rates-in-armenian-tech-a39fb82c02cd4523b086.js","225047680905269":"path---2018-01-12-promises-and-timeouts-baad461d87b399d20c47.js","58533573408837":"path---2018-02-06-simple-terminal-commands-bd91b280d99c28890f67.js","48709966264440":"path---2018-02-04-dual-booting-linux-with-windows-0bc985288c25386b8d21.js","34813623196209":"path---2018-02-08-js-types-primitives-variable-initialization-0ec14a574ff84a5c4617.js","16970302714623":"path---2018-02-10-js-boolean-expressions-and-conditionals-758bf89f3645514189cf.js","112146056632862":"path---2018-02-10-js-functions-scopes-and-var-980901dbca5c2879e48e.js","108922622794889":"path---2018-02-13-js-loops-683398a5a4179f2251fa.js","97113878278150":"path---2018-02-18-git-and-github-a2972468779a6f637c68.js","60759358512379":"path---2018-02-21-js-arrays-and-objects-7e7c70d967ab4b062bde.js","183018687124":"path---2018-02-22-recursion-37d4a41a287b29b80779.js","243465710210554":"path---2018-03-04-js-function-declaration-and-function-expression-05e7b324fa110be53570.js","122598896297167":"path---2018-03-06-javascript-edge-cases-ac441385f418a93a15fe.js","212699322700507":"path---2018-03-06-this-js-context-981a8233eb80f6812fbd.js","87164367457709":"path---2018-03-13-how-yerevan-coder-works-6e7f7458704a0d4dd034.js","219662475103984":"path---2018-03-14-front-end-react-js-developer-learning-path-6b2e7b69ded7d2dbbb69.js","92581312099755":"path---2018-03-15-js-classes-context-prototypes-a3e7c63fd4b8423dd495.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","216264865163919":"path---hiring-board-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-71ff421e71cb7e0ad76a.js","156245691397518":"path---new-job-posting-a0e39f21c11f6a62c5ab.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-26153d56726fbb607fed.js"}/*]]>*/</script><script>
	talkyardCommentsServerUrl = 'https://comments-for-yerevancoder-com.ed.community';
	talkyardCommentsScriptUrl = 'https://comments-for-yerevancoder-com.ed.community/-/ed-comments.v0.min.js';
	</script><script>
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-111477105-1', 'auto');
      }
      </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-bc341fb14aaf4cb10a84.js","/app-5727c19d48645603d222.js","/path---2018-03-06-javascript-edge-cases-ac441385f418a93a15fe.js","/component---src-templates-blog-post-js-21fb3885ffa601f4f2bd.js","/component---src-layouts-index-js-26153d56726fbb607fed.js"])/*]]>*/</script></body></html>