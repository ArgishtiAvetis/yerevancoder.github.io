<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-5436f36283722018d26e.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-js-affa453dcdf6cf1bb464.js" as="script"/><link rel="preload" href="/path---2018-03-06-javascript-edge-cases-37b11ff6b7cab64a7956.js" as="script"/><link rel="preload" href="/app-751af6f2c06851412bbb.js" as="script"/><link rel="preload" href="/commons-82b530103422a77a8731.js" as="script"/><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-751af6f2c06851412bbb.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-affa453dcdf6cf1bb464.js","162898551421021":"component---src-pages-404-js-78eb0160ebc5e112276c.js","35783957827783":"component---src-pages-index-js-b3cb31ed8c65d553445a.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","65041365863691":"path---2017-12-21-javascript-resources-f512bed408370d290282.js","191505078443957":"path---2017-12-20-init-post-0767a10ebdf73b4cb441.js","197253065398855":"path---2017-12-23-tech-places-and-events-736899989c4067678f28.js","55470570494735":"path---2017-12-24-squash-commits-with-git-135b6d00339ccc6b11b8.js","115028173322024":"path---2017-12-31-elm-intro-c337d28e1aa55291bf73.js","36374900432849":"path---2018-01-09-pay-rates-in-armenian-tech-6ff0d8a3a68676fcef21.js","16970302714623":"path---2018-02-10-js-boolean-expressions-and-conditionals-83eabc20d598c8f2b716.js","225047680905269":"path---2018-01-12-promises-and-timeouts-ff4c6a14f973d1cdda9f.js","34813623196209":"path---2018-02-08-js-types-primitives-variable-initialization-4eebb9dc4ed4ce11cf8f.js","112146056632862":"path---2018-02-10-js-functions-scopes-and-var-7f270b09ce91aacdf391.js","108922622794889":"path---2018-02-13-js-loops-855006b0bce304ef3727.js","58533573408837":"path---2018-02-06-simple-terminal-commands-61bc9af963a956271cd2.js","60759358512379":"path---2018-02-21-js-arrays-and-objects-e2bb0e8b45aba6a287e5.js","243465710210554":"path---2018-03-04-js-function-declaration-and-function-expression-001f39de4ffc89a8d5b4.js","183018687124":"path---2018-02-22-recursion-b88efd396fa661d98987.js","122598896297167":"path---2018-03-06-javascript-edge-cases-37b11ff6b7cab64a7956.js","212699322700507":"path---2018-03-06-this-js-context-a2d02e686ef3c352006e.js","48709966264440":"path---2018-02-04-dual-booting-linux-with-windows-0e330b945fc5c3a5dce2.js","97113878278150":"path---2018-02-18-git-and-github-470c872abb9b8836acc9.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-57ac945ef40e4b49c13f.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-5436f36283722018d26e.js"}/*]]>*/</script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Javascript. Edge Cases | yerevancoder</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75em 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-82b530103422a77a8731.js","/app-751af6f2c06851412bbb.js","/path---2018-03-06-javascript-edge-cases-37b11ff6b7cab64a7956.js","/component---src-templates-blog-post-js-affa453dcdf6cf1bb464.js","/component---src-layouts-index-js-5436f36283722018d26e.js"])/*]]>*/</script><style id="gatsby-inlined-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style></head><body><div id="___gatsby"><div style="max-width:61.25rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1873989271"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="3">yerevancoder</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Javascript. Edge Cases</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="7">March 06, 2018</p><div data-reactid="8"><h1>Edge cases in Javascript</h1>
<p>Hi everyone, today we are going to talk about the edge cases in JS</p>
<h2>Small Decimal Values</h2>
<p>The most (in)famous side effect of using binary floating-point
numbers (which, remember, is true of all languages that use IEEE
754 — not just JavaScript as many assume/pretend) is:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.3</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p>Simply put, the representations for 0.1 and 0.2 in binary
floating-point are not exact, so when they are added, the result
is not exactly 0.3. It’s really close: 0.30000000000000004, but if
your comparison fails, “close” is irrelevant.</p>
<p>FYI, <code>0.1 + 0.5 === 0.6</code> works perfectly fine.</p>
<p>So you just have to be careful while working with floating numbers.</p>
<p>One way of handling this issue in JS is to use a tiny “rounding
error”: <code>Number.EPSILON</code>. Here is its polyfill:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>EPSILON<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span>EPSILON <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>You simply have to create a function which does the “close to
equal” comparison with <code>Number.EPSILON</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span>n2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span> n1 <span class="token operator">-</span> n2 <span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span>EPSILON<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">;</span>

<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">// true</span>
<span class="token function">numbersCloseEnoughToEqual</span><span class="token punctuation">(</span> <span class="token number">0.0000001</span><span class="token punctuation">,</span> <span class="token number">0.0000002</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// false</span>
</code></pre>
      </div>
<h2>NaN</h2>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p><code>NaN</code> is a very special value in that it’s never equal to another
<code>NaN</code> value (i.e., it’s never equal to itself). It’s the only
value, in fact, that is not reflexive (without the Identity
characteristic <code>x === x</code>). So, <code>NaN !== NaN</code>.</p>
<p>So how do we test for it, if we can’t compare to <code>NaN</code> (since that
comparison would always fail)?</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>

<span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>Easy enough, right? We use the built-in global utility called
<code>isNaN(..)</code> and it tells us if the value is <code>NaN</code> or not. Problem solved!</p>
<p>Not so fast.</p>
<p>The isNaN(..) utility has a fatal flaw. It appears it tried to take the meaning of NaN (“Not a Number”) too literally — that its job is basically: “test if the thing passed in is either not a number or is a number.” But that’s not quite accurate.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>

a<span class="token punctuation">;</span> <span class="token comment">// NaN</span>
b<span class="token punctuation">;</span> <span class="token comment">// "foo"</span>


window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true -- ouch!</span>
</code></pre>
      </div>
<p>Clearly, “foo” is literally not a number, but it’s definitely not
the NaN value either! This bug has been in JS since the very
beginning (over 19 years of ouch).</p>
<p>As of ES6, finally a replacement utility has been provided:
<code>Number.isNaN(..)</code>. A simple polyfill for it so that you can
safely check NaN values now even in pre-ES6 browsers is:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isNaN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Number<span class="token punctuation">.</span><span class="token function-variable function">isNaN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token keyword">typeof</span> n <span class="token operator">===</span> <span class="token string">"number"</span> <span class="token operator">&amp;&amp;</span>
			window<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>

Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false -- phew!</span>
</code></pre>
      </div>
<h1>Infinity</h1>
<p>Developers from traditional compiled languages like C are probably
used to seeing either a compiler error or runtime exception, like
“Divide by zero,” for an operation like:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>However, in JS, this operation is well-defined and results in the
value Infinity (aka Number.POSITIVE_INFINITY). Unsurprisingly:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// Infinity</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// -Infinity</span>
</code></pre>
      </div>
<p>As you can see, -Infinity (aka Number.NEGATIVE_INFINITY) results
from a divide-by-zero where either (but not both!) of the divide
operands is negative.</p>
<p>JS uses finite numeric representations (IEEE 754 floating-point,
which we covered earlier), so contrary to pure mathematics, it
seems it is possible to overflow even with an operation like
addition or subtraction, in which case you’d get Infinity or
-Infinity.</p>
<p>For example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> Number<span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>	<span class="token comment">// 1.7976931348623157e+308</span>
a <span class="token operator">+</span> a<span class="token punctuation">;</span>				<span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">970</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// Infinity</span>
a <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">969</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 1.7976931348623157e+308</span>
</code></pre>
      </div>
<p>According to the specification, if an operation like addition
results in a value that’s too big to represent, the IEEE 754
“round-to-nearest” mode specifies what the result should be. So,
in a crude sense, <code>Number.MAX_VALUE + Math.pow( 2, 969 )</code> is
closer to <code>Number.MAX_VALUE</code> than to <code>Infinity</code>, so it “rounds
down,” whereas <code>Number.MAX_VALUE + Math.pow( 2, 970 )</code> is closer
to <code>Infinity</code> so it “rounds up”.</p>
<p>If you think too much about that, it’s going to make your head
hurt. So don’t. Seriously, stop!</p>
<p>Once you overflow to either one of the infinities, however,
there’s no going back. In other words, in an almost poetic sense,
you can go from finite to infinite but not from infinite back to
finite.</p>
<p>It’s almost philosophical to ask: “What is <code>Infinity</code> divided by
<code>Infinity</code>”. Our naive brains would likely say <code>1</code> or maybe
<code>Infinity</code>. Turns out neither is true. Both mathematically and in
JavaScript, <code>Infinity / Infinity</code> is not a defined operation.
In JS, this results in <code>NaN</code>.</p>
<h2>Negative zero</h2>
<p>It may confuse you as students of Computer Science major, but
Javascript has both negative and positive zeros!</p>
<p>Besides being specified literally as -0, negative zero also
results from certain mathematic operations. For example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// -0</span>
</code></pre>
      </div>
<p>However, there is a strange behavior when you want to convert
<code>-0</code> to string:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">// (some browser) consoles at least get it right</span>
a<span class="token punctuation">;</span>							<span class="token comment">// -0</span>

<span class="token comment">// but the spec insists on lying to you!</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// "0"</span>
a <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>			<span class="token comment">// "0"</span>
<span class="token function">String</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// "0"</span>

<span class="token comment">// strangely, even JSON gets in on the deception</span>
JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// "0"</span>
</code></pre>
      </div>
<p>and surprisingly, the reverse operation from <code>string</code> to
<code>number</code> results in a correct way:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token operator">+</span><span class="token string">"-0"</span><span class="token punctuation">;</span>			<span class="token comment">// -0</span>
<span class="token function">Number</span><span class="token punctuation">(</span> <span class="token string">"-0"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// -0</span>
JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span> <span class="token string">"-0"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// -0</span>
</code></pre>
      </div>
<p>In addition to stringification of negative zero being deceptive to
hide its true value, the comparison operators are also
(intentionally) configured to lie.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">;</span>

a <span class="token operator">==</span> b<span class="token punctuation">;</span>		<span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>

a <span class="token operator">===</span> b<span class="token punctuation">;</span>	<span class="token comment">// true</span>
<span class="token operator">-</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>

<span class="token number">0</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span>		<span class="token comment">// false</span>
a <span class="token operator">></span> b<span class="token punctuation">;</span>		<span class="token comment">// false</span>
</code></pre>
      </div>
<p>In nowadays browsers you can get the right output of
<code>console.log</code> tho:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// -0</span>
</code></pre>
      </div>
<p>However, older browsers may still return 0 (As a good programmer,
you have to use an up-to-date software, right?)</p>
<p>Clearly, if you want to distinguish between <code>0</code> and <code>-0</code>, you
can’t just rely on what the developer console outputs. So let’s be
a little bit more clever:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isNegZero</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	n <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> n <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>
<span class="token function">isNegZero</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// false</span>
</code></pre>
      </div>
<p>Great! But why do we need <code>-0</code>?</p>
<p>There are some kind of applications that use that sign to find out
the direction of movement before it came to 0. Preserving the sign
of 0 prevents potentially unwanted information loss.</p>
<h3><code>Object.is(..)</code></h3>
<p>As of ES6, there’s a new utility that can be used to test two
values for absolute equality, without any of these exceptions.
It’s called <code>Object.is(..)</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">/</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">0</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token number">NaN</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> b<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// true</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> b<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// false</span>
</code></pre>
      </div>
<p>Let’s try to reimplement <code>Object.is(..)</code> for pre-ES6
environments:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>is<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Object<span class="token punctuation">.</span><span class="token function-variable function">is</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// test for `-0`</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v2 <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> v1 <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> v2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// test for `NaN`</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>v1 <span class="token operator">!==</span> v1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> v2 <span class="token operator">!==</span> v2<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// everything else</span>
		<span class="token keyword">return</span> v1 <span class="token operator">===</span> v2<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p><code>Object.is(..)</code> probably shouldn’t be used in cases where ==
or === are known to be safe (see Chapter 4 “Coercion”), as the
operators are likely much more efficient and certainly are more
idiomatic/common. <code>Object.is(..)</code> is mostly for these special
cases of equality.</p>
<h2>Value vs. Reference</h2>
<p>Let’s start from the example:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// `b` is always a copy of the value in `a`</span>
b<span class="token operator">++</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// 2</span>
b<span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> d <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment">// `d` is a reference to the shared `[1,2,3]` value</span>
d<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
d<span class="token punctuation">;</span> <span class="token comment">// [1,2,3,4]</span>
</code></pre>
      </div>
<p>Simple values (aka scalar primitives) are always assigned/passed
by value-copy: null, undefined, string, number, boolean, and ES6’s
symbol.</p>
<p>Compound values — objects (including arrays, and all boxed object
wrappers — see Chapter 3) and functions — always create a copy
of the reference on assignment or passing.</p>
<p>Since references point to the values themselves and not to the
variables, you cannot use one reference to change where another
reference is pointed:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>

<span class="token comment">// later</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>
b<span class="token punctuation">;</span> <span class="token comment">// [4,5,6]</span>
</code></pre>
      </div>
<h2><code>this</code></h2>
<p>Consider this code snippet:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">"foo: "</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// keep track of how many times `foo` is called</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">foo</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 -- WTF?</span>
</code></pre>
      </div>
<p>Congratulations, we’ve just created a global variable <code>count</code>
with value <code>NaN</code>! <code>this</code> in <code>this.count++</code> points to
global object! :O</p>
<p>This is another way of creating and accesing global variables
(never do this):</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre>
      </div>
<p>To solve this issue, we have to call foo function with binding to
function foo (which is apparently an object):</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">"foo: "</span> <span class="token operator">+</span> num <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// keep track of how many times `foo` is called</span>
	<span class="token comment">// Note: `this` IS actually `foo` now, based on</span>
	<span class="token comment">// how `foo` is called (see below)</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

foo<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// using `call(..)`, we ensure the `this`</span>
		<span class="token comment">// points at the function object (`foo`) itself</span>
		foo<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> foo<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// foo: 6</span>
<span class="token comment">// foo: 7</span>
<span class="token comment">// foo: 8</span>
<span class="token comment">// foo: 9</span>

<span class="token comment">// how many times was `foo` called?</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span>count <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre>
      </div>
<p>Let’s see what happens when you share reference of a function to
another variable and then call it:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	foo<span class="token punctuation">:</span> foo
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span> <span class="token comment">// function reference/alias!</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">"oops, global"</span><span class="token punctuation">;</span> <span class="token comment">// `a` also property on global object</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "oops, global"</span>
</code></pre>
      </div>
<p>Right! So what does this mean? <code>bar === obj.foo</code>. These
variables are sharing the same reference to the same shared value.</p>
<p>Another example to show this problem from another side:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doFoo</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// `fn` is just another reference to `foo`</span>

	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- call-site!</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	foo<span class="token punctuation">:</span> foo
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">"oops, global"</span><span class="token punctuation">;</span> <span class="token comment">// `a` also property on global object</span>

<span class="token function">doFoo</span><span class="token punctuation">(</span> obj<span class="token punctuation">.</span>foo <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "oops, global"</span>
</code></pre>
      </div>
<h2>Automatic Semicolon Insertion</h2>
<p>One of the features that JavaScript offers is that semicolons are optional for programmers. However, you should be attentive with this! Sometimes missing the semicolons can result in errors or undesired results.</p>
<h3>Function return statements</h3>
<p>Let’s take a look at the function below. What will it return?</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span>
	<span class="token string">"How are you?"</span>
<span class="token punctuation">}</span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
</code></pre>
      </div>
<p>Oops! It returns <code>undefined</code> instead of asking how are you. But why? Well, the reason is that it added a semicolon after <code>return</code> which means you didn’t mention what to return; thus, it’s undefined.</p>
<p>What if you want to return several things and it’s not so comfortable to write it after the <code>return</code>. You just need to add parentheses (see below).</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span><span class="token punctuation">(</span>
		<span class="token string">"How are you?"</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//How are you?</span>
</code></pre>
      </div>
<h3>Starting a line with parentheses || angle brackets</h3>
<p>Another tricky edge case in JavaScript is when you skip putting a semicolon and start the next line with parentheses. Look at this code.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">const</span> trickyVariable <span class="token operator">=</span> <span class="token string">'I am a String'</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Be Happy If You See Me'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Uncaught TypeError: "I am a String" is not a function</span>
</code></pre>
      </div>
<p>To fix this error you should add a semicolon after defining a variable.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">const</span> trickyVariable <span class="token operator">=</span> <span class="token string">'I am a String'</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Be Happy If You See Me'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Be Happy If You See Me</span>
</code></pre>
      </div>
<p>The same happens with <code>angle brackets [ ]</code>. Be careful in such cases!</p>
<h2>Other</h2>
<p>This isn’t even an edge case, but a lot of people make a mistake
right here:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token number">5</span> <span class="token operator">+</span> <span class="token string">'-5'</span> <span class="token operator">===</span> <span class="token string">'5-5'</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>number <code>5</code> is simply coerced (type casted, type converted) to
a string <code>"5"</code> and the concatenated to <code>"-5"</code></p>
<p>The same case with <code>-</code> sign! As we know, there is no such
operation for string using <code>-</code>. This JS will coerce <code>"-5"</code> to
<code>-5</code> and then do a mathmatical operation <code>-</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token number">5</span> <span class="token operator">-</span> <span class="token string">'-5'</span> <span class="token operator">===</span> <span class="token number">10</span> <span class="token comment">// true</span>
</code></pre>
      </div>
<p>A lot of beginner JS developers have a trouble with
understanding references in JS. As one of the biggerst issues
is this one:</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// false</span>
</code></pre>
      </div>
<p><code>===</code> sign compares two reference-values. And of course
references to 2 different arrays are different, thus the
compareson fails.</p>
<p>A very popular question for a JS developer! Take a minute and
try to understand why would this happen!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 0</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// [object Object]</span>
</code></pre>
      </div>
<p>Ok, I hope you tried it! So here is the thing.</p>
<p>Let’s start with the first line</p>
<p>When we do <code>{} + []</code>, JS first reads <code>{}</code> as a block scope,
run it and then immediately exits it because there is no
operation to do (It doesn’t recognize <code>{}</code> as object in this
case!). And then we are left with <code>+ []</code> which means “change
the type of <code>[]</code> to a number” (Remember how we change a string
to a number with the same operation <code>+"5" === 5</code>).
So JS simply coerces <code>[]</code> to <code>0</code></p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token comment">// true!</span>
</code></pre>
      </div>
<p>The second line!</p>
<p>In this case JS understands <code>+</code> as a concatenation sign
because on both sides of the operation we can see objects
(Array and object)! So <code>+</code> just coerces <code>[]</code> to <code>''</code> and <code>{}</code>
to <code>[object Object]</code>. After that it concatenates
<code>'' + [object Object]</code> which of course results in
<code>[object Object]</code>!</p>
<p>This is the case we’ve talked about on our slack channel!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x <span class="token operator">==</span> x <span class="token comment">// true</span>
x <span class="token operator">==</span> <span class="token operator">!</span>x <span class="token comment">// true</span>
</code></pre>
      </div>
<p>As we all know the <code>==</code> operator doesn’t preserve types of the
values on both sides. So it coerces those until it gets the same
type!</p>
<p>So let me describe you this case. On the second line where we have
<code>x == x</code>, we have an object (array) on both sides. We just check
if the reference of these objects are the same or not (of course
those are the same because it’s the same variable). What’s about
the 3rd line? On the left side we still have a reference to an
array, but on the right side we have (what?) a boolean value!!!
Why does that happen? EZ, <code>!</code> operator changes the type of any
value to boolean! So <code>==</code> operator will do coercion of both sides
to get the same type. Both are coerced to <code>number</code>. So <code>[] -> 0</code>
and <code>false -> 0</code>. That’s it!</p>
<p>Let’s now consider this funny case! Have you thought about
overwriting <code>undefined</code>? Sounds crazy, right? JS doesn’t think so!</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token keyword">var</span> undefined <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// really bad idea!</span>
</code></pre>
      </div>
<p>NEVER DO THIS.</p>
<!--
So to prevent this from happening use `'use strict'` (We will talk about it in the next lecture but for now just use it :D )!

```js
"use strict";
var undefined = 2; // TypeError!
``` -->
<!-- ```js
// just in case you don't want to add
// 'use strict' to the whole environment
foo();
function foo() {
	"use strict";
	undefined = 2; // TypeError!
}
``` -->
<p>Thanks for reading! Hope you liked it! :D</p>
<h3>Reference</h3>
<p>“You don’t know JS”: <a href="https://github.com/getify/You-Dont-Know-JS">https://github.com/getify/You-Dont-Know-JS</a>
“Mauro Bringolf”: <a href="https://maurobringolf.ch/2017/06/automatic-semicolon-insertion-edge-cases-in-javascript/">https://maurobringolf.ch/2017/06/automatic-semicolon-insertion-edge-cases-in-javascript/</a></p></div><hr style="margin-bottom:1.75rem;" data-reactid="9"/><div class="ed-comments" data-discussion-id="2018-02-08-javascript-edge-cases" data-ed-page-id="" data-reactid="10"><noscript data-reactid="11">Please enable Javascript to view comments.</noscript><p style="margin-top:25px;opacity:0.9;font-size:96%;" data-reactid="12"><!-- react-text: 13 -->Comments powered by <!-- /react-text --><a href="https://www.effectivediscussions.org" data-reactid="14">Effective Discussions</a><!-- react-text: 15 -->.<!-- /react-text --></p></div></div><span style="display:block;clear:both;" data-reactid="16"> </span></div></div><script>
	edCommentsServerUrl = 'https://comments-for-yerevancoder-com.ed.community';
	edCommentsScriptUrl = 'https://comments-for-yerevancoder-com.ed.community/-/ed-comments.v0.min.js';
	</script><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-111477105-1', 'auto');
  </script></body></html>